# BlockChain
Blockchain  is a data structure that makes it possible to create a digital ledger of transactions and share it among a distributed network of computers. It uses cryptography to allow each participant on the network to manipulate the ledger in a secure way without the need for a central authority.

The most widely known application of a blockchain is the public ledger of transactions for cryptocurrencies used in Bitcoin.The blockchain holds a record of every transaction made by every participant. Cryptography is used to verify transactions and keep information on the blockchain private. Many participants verify each transaction, providing highly redundant verification and are rewarded for the computational work required. By confirming transactions using decentralized consensus, the blockchain eliminates the need for trust.

Using blockchain technology one can build innovative platforms that can transform markets.**Ethereum** is one such platform built on blockchain technology. 

# Ethereum
Ethereum is a standalone open source platform cryptocurrency and blockchain platform. It offers a platform for developers to create and publish their applications called **smart contracts**,that run exactly as programmed without any possibility of downtime, censorship, fraud or third party interferenceon the blockchain. The computing power for these hosted applications is supplied by the network, where people contribute their computerâ€™s processing power to maintain and run the applications. Like Bitcoin mining, Ethereum miners also receive ether rewards for their contributions. Ether is the crypto-tokens used on Ethereum and the developers have to pay ether to be able to host their applications. In addition, ether can also be sold or purchased on various cryptocurrency exchanges.

The versatility of gthe Ethereum platform and the ability to create and execute smart contracts makes it a valuable option for the banking and fintech industry.By using smart contracts financial institutions, trading platforms and even banking sector can automate their back office process, reduce the workforce and time required to process the requests.

# Create and deploy smart contract in ethereum
To create and deploy smart contracts in etherum, we need an instance with ethereum and all the required packages,compilers installed.

Below are the steps to follow to deploy new contracts or use the existing ones:

- Ubuntu virtual machine with ethereum is setup on Microsoft azure. To access the instance please send an email to - [Hina.watts@rbs.com](Hina.watts@rbs.com) or [Vivek.lamba@rbs.com](Vivek.lamba@rbs.com) and ask for the required details of the ethereum instance.
- Once you have the information of the instance (hostname,username and password), you can login to the machine using any SSH client.
- Ethereum implements a javascript runtime environment (JSRE) that can be used in either interactive (console) or non-interactive (script) mode.The ethereum CLI executable geth has a JavaScript console,which can be started with the console subcommand. The console subcommands starts the geth node and then opens the console.
- Run the geth console using the command `geth --maxpeers 0 --genesis genesis.json --networkid 87654321  --rpc  --rpcaddr="0.0.0.0" --rpccorsdomain "*"  --rpcport="8545" --rpcapi "db,eth,net,web3" console`.You can also run in different network by changing the `networkid` flag to another unique number.
- SSH the same instance and run the command `geth attach` to open the console on a running geth instance.
- Please refer the `contract.txt` file - smart contract written in solidity or write your own contract.This instance has solidity compiler installed ,for any other language you will have to first install the required compiler.
- To deploy the contract we will have to first compile the contract.Copy the source code and declare it in variable as shown : `var crowdFundingContract ='contract CrowdFunding { struct Funder { address addr; uint amount; } struct Loan { address beneficiary; uint fundingGoal; uint numFunders; uint amount; uint deadline; uint grace_period; uint tenor; uint interest_rate; mapping (uint => Funder) funders; } uint numLoans; mapping (uint => Loan) loans; function newLoan(address beneficiary, uint goal, uint deadline, uint grace_period, uint tenor, uint interest_rate) returns (uint LoanID) { LoanID = numLoans++; Loan l = loans[LoanID]; l.beneficiary = beneficiary; l.fundingGoal = goal; l.deadline = block.number + deadline; l.grace_period = l.deadline + grace_period; l.tenor = l.grace_period + tenor; } function contribute(uint LoanID) { Loan l = loans[LoanID]; Funder f = l.funders[l.numFunders++]; f.addr = msg.sender; f.amount = msg.value; l.amount += f.amount; } function checkGoalReached(uint LoanID) returns (bool reached) { Loan l = loans[LoanID]; if (l.amount >= l.fundingGoal){ uint i = 0; uint f = l.numFunders; l.beneficiary.send(l.amount); l.amount = 0; l.beneficiary = 0; l.fundingGoal = 0; l.deadline = 0; l.numFunders = 0; while (i <= f){ l.funders[i].addr = 0; l.funders[i].amount = 0; i++; } return true; } if (l.deadline <= block.number){ uint j = 0; uint n = l.numFunders; l.beneficiary = 0; l.fundingGoal = 0; l.numFunders = 0; l.deadline = 0; l.amount = 0; while (j <= n){ l.funders[j].addr.send(l.funders[j].amount); l.funders[j].addr = 0; l.funders[j].amount = 0; j++; } return true; } return false; } function repayLoan(uint LoanID) { Loan l = loans[LoanID]; Funder f = l.funders[l.numFunders++]; f.addr = msg.sender; f.amount = msg.value; l.amount += f.amount; } }'`
- Compile the contract using command `var contractCompiled=web3.eth.compile.solidity(crowdFundingContract)`
- Run the command `var contractObj=web3.eth.contract(contractCompiled.crowdFunding.info.abiDefinition);`to get the reference to contract object.
- Deploy the contract by running `var contractDep = contractObj.new({from:web3.eth.accounts[0], data:loanCompiled.loan.code, gas: 1000000}, function(e, contract){if(!e) {if(!contract.address) {console.log("Contract transaction send: TransactionHash: " + contract.transactionHash + " waiting to be mined...");} else {console.log("Contract mined! Address: " + contract.address);console.log(contract);}}})`
This deployment is sent as a transaction to blockchain,which when mined will allocate address to the contract on blockchain.Once the transaction is mined,you will see the message like this on console `Contract mined! address: 0xdaa24d02bad7e9d6a80106db164bad9399a0423e`This implies that you have successfully deployed your contract on blockchain.
-Once the address is allocated to smart contract on blockchain,you can access the contract using the `contract address` and `ABI Definition(Application Binary Interface that determines such details as how functions are called and in which binary format information should be passed from one program component to the next)`.Command syntax to use the deployed contract
 
 	var contractDep=web3.eth.contract(`ABI Definition`).at(`Contract Address`)

- You or your peers on the same network can access any of the public methods of the contract using the contract address. For Example,we have one method  `newLoan`in the contract attached.To access that method run the command `contractDep.newLoan.sendTransaction(eth.accounts[1],20000000000000000000,1000,3,1,1,{from: eth.accounts[0],gas:500000})`
This will call the newLoan method logic written in the contract with the required arguments.As shown,command needs a .sendTransaction() call. Since this function is meant to change the state (write operation), it is sent as a transaction to the network to be picked up by miners and included in the canonical blockchain.So to get this transaction mined,one has to pay the cost termed as `gas`.
This way you can access other methods of the contract and write your own methods as well.

- For more information on ethereum and smart contracts please refer [http://ethereum.org](http://ethereum.org)


